[tox]
skipsdist = True
envlist = docs-{strict,allowfailures}, server

[testenv]
passenv = 
    IP
    PORT
    aristotlemdr__BASE_DIR
    SELENIUM_DRIVER
setenv =
    server: ARISTOTLE_DEV_SKIP_MIGRATIONS=1
    server: PYTHONPATH={toxinidir}
changedir=
    docs: docs
    pdf: docs
commands=
    server: {toxinidir}/server/manage.py {posargs}
    docs-strict: sphinx-build -nWaE -b html . _build/html/
    docs-allowfailures: sphinx-build -aE -b html . _build/html/
    pdf: sphinx-build -aE -b pdf . _build/pdf/
deps =
    docs: -r{toxinidir}/requirements.docs.txt
    pdf: -r{toxinidir}/requirements.docs.txt
    server: -r{toxinidir}/requirements.server.txt
